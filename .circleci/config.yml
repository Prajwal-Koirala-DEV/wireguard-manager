version: 2.1

jobs:
  ubuntu_based_test:
    docker:
      # Use a generic, verified Docker image for Ubuntu.
      - image: ubuntu:20.04
    steps:
      - checkout
      - run:
          name: Update and install dependencies
          command: apt-get update && apt-get install -y curl bash resolvconf
      - run:
          name: Download and prepare WireGuard Manager script
          command: |
            curl https://raw.githubusercontent.com/complexorganizations/wireguard-manager/main/wireguard-manager.sh --create-dirs -o /usr/local/bin/wireguard-manager.sh
            chmod +x /usr/local/bin/wireguard-manager.sh
      - run:
          name: Execute script
          command: bash /usr/local/bin/wireguard-manager.sh --install

workflows:
  version: 2
  comprehensive_tests:
    jobs:
      - ubuntu_based_test
